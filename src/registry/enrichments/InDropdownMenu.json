{
  "component": "InDropdownMenu",
  "_metadata": {
    "lastUpdated": "2025-11-25T14:48:39.823Z",
    "propsHash": "405ec2061e6b",
    "eventsHash": "d9b44726d530",
    "propCount": 40,
    "eventCount": 9
  },
  "propEnrichments": {
    "options": {
      "valueFormat": {
        "structure": "Array<Object>",
        "objectShape": "{ text: string, value: any, icon?: string, description?: string, disabled?: boolean, secondaryButton?: Object }",
        "examples": [
          "[{ text: 'Edit', value: 'edit', icon: 'pencil' }]",
          "[{ text: 'Delete', value: 'delete', icon: 'trash', description: 'Remove permanently' }]",
          "[{ text: 'Export', value: 'export', secondaryButton: { icon: 'download', action: 'download-csv' } }]"
        ],
        "requiredKeys": [
          "text",
          "value"
        ],
        "optionalKeys": [
          "icon",
          "description",
          "disabled",
          "secondaryButton"
        ],
        "notes": "CRITICAL: Property is 'text' not 'label'! secondaryButton adds extra action button to menu item.",
        "typescript": "Array<{ text: string; value: any; icon?: string; description?: string; disabled?: boolean; secondaryButton?: { icon: string; action: string } }>"
      },
      "relatedProps": [
        "selectionType",
        "preSelectedValues",
        "searchStatus"
      ],
      "commonMistakes": [
        {
          "mistake": "Using 'label' instead of 'text' property",
          "impact": "Menu items won't display, shows empty dropdown menu",
          "fix": "Change { label: 'X' } to { text: 'X' }",
          "severity": "critical",
          "detectPattern": "options.*label:"
        },
        {
          "mistake": "Passing array of strings instead of objects",
          "impact": "Component expects objects with text/value",
          "fix": "Transform ['item1', 'item2'] to [{ text: 'item1', value: 'item1' }]",
          "severity": "critical"
        },
        {
          "mistake": "Not providing unique values",
          "impact": "Menu item click tracking fails",
          "fix": "Ensure each option has unique value property",
          "severity": "high"
        },
        {
          "mistake": "Wrong secondaryButton structure",
          "impact": "Secondary action button won't work",
          "fix": "Use { icon: 'icon-name', action: 'action-key' }",
          "severity": "medium"
        }
      ]
    },
    "preSelectedValues": {
      "valueFormat": {
        "structure": "Array<any>",
        "examples": [
          "[]",
          "['edit']",
          "['edit', 'delete']",
          "[1, 2, 3]"
        ],
        "notes": "Array of option values (not objects!) to pre-select. Used when selectionType='multiple' to show checkmarks.",
        "typescript": "Array<any>"
      },
      "relatedProps": [
        "selectionType",
        "options"
      ],
      "commonMistakes": [
        {
          "mistake": "Passing array of objects instead of values",
          "impact": "Pre-selection won't work, no checkmarks shown",
          "fix": "Use [option.value, option.value] not [option, option]",
          "severity": "high"
        },
        {
          "mistake": "Using preSelectedValues with selectionType='single'",
          "impact": "Only shows checkmark, doesn't prevent multiple selections",
          "fix": "Set selectionType='multiple' for multi-select behavior",
          "severity": "medium"
        }
      ]
    },
    "selectionType": {
      "valueFormat": {
        "structure": "string (enum)",
        "validValues": [
          "single",
          "multiple"
        ],
        "default": "single",
        "notes": "Controls selection behavior. 'single' closes menu on click, 'multiple' keeps open with checkboxes.",
        "typescript": "'single' | 'multiple'"
      },
      "relatedProps": [
        "preSelectedValues",
        "selectAllOptionStatus"
      ],
      "commonMistakes": [
        {
          "mistake": "Using 'multi' or 'checkbox' instead of 'multiple'",
          "impact": "Validation fails, defaults to 'single'",
          "fix": "Use exact string: 'multiple'",
          "severity": "high"
        },
        {
          "mistake": "Not handling multiple selections properly",
          "impact": "Can't track all selected items",
          "fix": "Listen to @optionClick and maintain selection array",
          "severity": "medium"
        }
      ]
    },
    "searchStatus": {
      "valueFormat": {
        "structure": "Boolean",
        "default": "false",
        "notes": "Enable search/filter functionality within dropdown menu",
        "typescript": "boolean"
      },
      "relatedEvents": [
        "search"
      ],
      "relatedProps": [
        "lazyLoadSearch",
        "externalSearch"
      ]
    },
    "selectAllOptionStatus": {
      "valueFormat": {
        "structure": "Boolean",
        "default": "false",
        "notes": "Show 'Select All' option at top when selectionType='multiple'",
        "typescript": "boolean"
      },
      "relatedProps": [
        "selectionType"
      ],
      "relatedEvents": [
        "selectAllOptions",
        "resetAllOptions"
      ]
    },
    "createOptionStatus": {
      "valueFormat": {
        "structure": "Boolean",
        "default": "false",
        "notes": "Allow creating new menu items on the fly",
        "typescript": "boolean"
      },
      "relatedProps": [
        "optionValidationType",
        "optionValidationText"
      ],
      "relatedEvents": [
        "addOption"
      ]
    },
    "staticPosition": {
      "valueFormat": {
        "structure": "string (enum)",
        "validValues": [
          "bottom left",
          "bottom right",
          "top left",
          "top right"
        ],
        "default": "bottom left",
        "notes": "Dropdown menu position relative to trigger button",
        "typescript": "'bottom left' | 'bottom right' | 'top left' | 'top right'"
      },
      "relatedProps": [
        "dynamicPosition"
      ]
    },
    "state": {
      "valueFormat": {
        "structure": "string (enum)",
        "validValues": [
          "default",
          "success",
          "warning",
          "error"
        ],
        "default": "default",
        "notes": "Visual state for validation feedback",
        "typescript": "'default' | 'success' | 'warning' | 'error'"
      },
      "relatedProps": [
        "stateMessage"
      ]
    }
  },
  "eventEnrichments": {
    "optionClick": {
      "payloadTypes": [
        {
          "condition": "When user clicks a menu item",
          "type": "Object",
          "format": "{ text: string, value: any, icon?: string }",
          "example": "{ text: 'Edit', value: 'edit', icon: 'pencil' }"
        }
      ],
      "useCase": "Main click event for menu items. Handle action based on value property",
      "handlingPattern": "@optionClick=\"handleMenuClick\"\n\nhandleMenuClick(option) {\n  switch(option.value) {\n    case 'edit':\n      this.editItem();\n      break;\n    case 'delete':\n      this.deleteItem();\n      break;\n  }\n}",
      "commonMistakes": [
        {
          "mistake": "Not handling all menu option values",
          "impact": "Some menu items do nothing when clicked",
          "fix": "Add switch/if cases for all option.value values",
          "severity": "high"
        }
      ]
    },
    "secondaryButtonClick": {
      "payloadTypes": [
        {
          "condition": "When secondaryButton clicked on menu item",
          "type": "Object",
          "format": "{ option: Object, action: string }",
          "example": "{ option: { text: 'Export', value: 'export' }, action: 'download-csv' }"
        }
      ],
      "useCase": "Emitted when secondary action button clicked. Different from main optionClick",
      "handlingPattern": "@secondaryButtonClick=\"handleSecondary\"\n\nhandleSecondary({ option, action }) {\n  if (action === 'download-csv') {\n    this.downloadCSV(option.value);\n  }\n}",
      "relatedProps": [
        "options.secondaryButton"
      ]
    },
    "selectAllOptions": {
      "payloadTypes": [
        {
          "condition": "When 'Select All' clicked (selectionType='multiple')",
          "type": "Array",
          "format": "Array<Object>",
          "example": "[{ text: 'Opt1', value: 1 }, { text: 'Opt2', value: 2 }]"
        }
      ],
      "useCase": "Emitted when user clicks 'Select All'. Payload contains all available options",
      "relatedProps": [
        "selectAllOptionStatus",
        "selectionType"
      ]
    },
    "resetAllOptions": {
      "payloadTypes": [
        {
          "condition": "When 'Reset All' clicked",
          "type": "Array",
          "format": "[]",
          "example": "[]"
        }
      ],
      "useCase": "Emitted when user clears all selections. Payload is empty array",
      "relatedProps": [
        "selectAllOptionStatus"
      ]
    },
    "search": {
      "payloadTypes": [
        {
          "condition": "When searchStatus=true and user types",
          "type": "string",
          "example": "\"search query\""
        }
      ],
      "useCase": "Emitted when user types in search box. Use to filter options",
      "relatedProps": [
        "searchStatus",
        "lazyLoadSearch"
      ]
    },
    "addOption": {
      "payloadTypes": [
        {
          "condition": "When createOptionStatus=true and new item created",
          "type": "string",
          "example": "\"New Item\""
        }
      ],
      "useCase": "Emitted when user creates a new option. Add to options array",
      "relatedProps": [
        "createOptionStatus"
      ]
    }
  },
  "examples": [
    {
      "title": "Basic Dropdown Menu (Actions)",
      "description": "Simple action menu with icons",
      "code": "<InDropdownMenu\n  id=\"action-menu\"\n  button-label=\"Actions\"\n  :options=\"[\n    { text: 'Edit', value: 'edit', icon: 'pencil' },\n    { text: 'Delete', value: 'delete', icon: 'trash' },\n    { text: 'Share', value: 'share', icon: 'share' }\n  ]\"\n  @optionClick=\"handleAction\"\n/>",
      "language": "vue"
    },
    {
      "title": "Multi-Select Dropdown Menu",
      "description": "Multiple selection with checkboxes",
      "code": "<InDropdownMenu\n  id=\"filter-menu\"\n  button-label=\"Filter Columns\"\n  selection-type=\"multiple\"\n  :options=\"[\n    { text: 'Name', value: 'name' },\n    { text: 'Email', value: 'email' },\n    { text: 'Status', value: 'status' }\n  ]\"\n  :pre-selected-values=\"['name', 'email']\"\n  select-all-option-status\n  @optionClick=\"toggleColumn\"\n/>",
      "language": "vue"
    },
    {
      "title": "Dropdown Menu with Secondary Actions",
      "description": "Menu items with additional action buttons",
      "code": "<InDropdownMenu\n  id=\"export-menu\"\n  button-label=\"Export\"\n  :options=\"[\n    {\n      text: 'Export as CSV',\n      value: 'csv',\n      icon: 'file',\n      secondaryButton: { icon: 'download', action: 'quick-download' }\n    },\n    {\n      text: 'Export as PDF',\n      value: 'pdf',\n      icon: 'file-pdf',\n      secondaryButton: { icon: 'settings', action: 'configure' }\n    }\n  ]\"\n  @optionClick=\"handleExport\"\n  @secondaryButtonClick=\"handleSecondaryAction\"\n/>",
      "language": "vue"
    },
    {
      "title": "Searchable Dropdown Menu",
      "description": "Large menu with search functionality",
      "code": "<InDropdownMenu\n  id=\"country-menu\"\n  button-label=\"Select Country\"\n  :options=\"countries\"\n  search-status\n  @search=\"filterCountries\"\n  @optionClick=\"selectCountry\"\n/>",
      "language": "vue"
    }
  ],
  "helperFunctions": [
    {
      "name": "transformArrayToOptions",
      "description": "Transform simple array to dropdown menu options",
      "usage": "transformArrayToOptions(['Edit', 'Delete', 'Share'])",
      "code": "const transformArrayToOptions = (items) => {\n  return items.map(item => ({\n    text: item,\n    value: item.toLowerCase(),\n    icon: getIconForAction(item) // optional\n  }));\n};"
    },
    {
      "name": "getSelectedOptions",
      "description": "Get full option objects from selected values (for multiple selection)",
      "usage": "getSelectedOptions(options, ['edit', 'delete'])",
      "code": "const getSelectedOptions = (allOptions, selectedValues) => {\n  return allOptions.filter(opt => selectedValues.includes(opt.value));\n};"
    }
  ],
  "codeSnippets": {
    "basicMenu": {
      "title": "Basic Action Menu",
      "description": "Simple dropdown with actions",
      "code": "<InDropdownMenu\n  id=\"actions\"\n  button-label=\"Actions\"\n  :options=\"[\n    { text: 'Edit', value: 'edit', icon: 'pencil' },\n    { text: 'Delete', value: 'delete', icon: 'trash' }\n  ]\"\n  @optionClick=\"handleAction\"\n/>"
    },
    "multiSelect": {
      "title": "Multi-Select with Select All",
      "description": "Multiple selection with checkboxes",
      "code": "<InDropdownMenu\n  id=\"filters\"\n  button-label=\"Filters\"\n  selection-type=\"multiple\"\n  :pre-selected-values=\"selected\"\n  select-all-option-status\n  :options=\"filterOptions\"\n  @optionClick=\"handleFilter\"\n  @selectAllOptions=\"selectAll\"\n  @resetAllOptions=\"clearAll\"\n/>"
    },
    "searchable": {
      "title": "Searchable Menu",
      "description": "Large menu with search",
      "code": "<InDropdownMenu\n  id=\"countries\"\n  button-label=\"Select Country\"\n  search-status\n  :options=\"filteredCountries\"\n  @search=\"filterCountries\"\n  @optionClick=\"selectCountry\"\n/>"
    }
  },
  "styling": {
    "cssVariables": {
      "--dropdown-menu-bg": "Menu background color (default: white)",
      "--dropdown-menu-text": "Text color",
      "--dropdown-menu-hover-bg": "Hover background color",
      "--dropdown-menu-max-height": "Maximum height before scrolling (default: 300px)",
      "--dropdown-menu-width": "Menu width (default: auto)",
      "--dropdown-menu-border-radius": "Border radius (default: 4px)",
      "--dropdown-menu-shadow": "Box shadow"
    },
    "classes": {
      "in-dropdown-menu": "Root container",
      "in-dropdown-menu__button": "Trigger button",
      "in-dropdown-menu__menu": "Dropdown menu panel",
      "in-dropdown-menu__item": "Menu item",
      "in-dropdown-menu__item--selected": "Selected item (multiple mode)",
      "in-dropdown-menu__item--disabled": "Disabled menu item",
      "in-dropdown-menu__search": "Search input container",
      "in-dropdown-menu__secondary-button": "Secondary action button on item",
      "in-dropdown-menu__icon": "Item icon",
      "in-dropdown-menu__description": "Item description text"
    },
    "notes": "Use CSS variables to customize appearance. Max-height creates scrollable menu for long lists."
  },
  "implementationPatterns": [
    {
      "name": "Table Row Actions",
      "description": "Action menu for each table row",
      "code": "<script setup>\nimport { InDropdownMenu } from '@useinsider/design-system-vue';\n\nconst rowActions = [\n  { text: 'View Details', value: 'view', icon: 'eye' },\n  { text: 'Edit', value: 'edit', icon: 'pencil' },\n  { text: 'Delete', value: 'delete', icon: 'trash' }\n];\n\nconst handleRowAction = (action, row) => {\n  switch(action.value) {\n    case 'view':\n      router.push(`/users/${row.id}`);\n      break;\n    case 'edit':\n      openEditModal(row);\n      break;\n    case 'delete':\n      confirmDelete(row);\n      break;\n  }\n};\n</script>\n\n<template>\n  <tr v-for=\"row in tableData\" :key=\"row.id\">\n    <td>{{ row.name }}</td>\n    <td>\n      <InDropdownMenu\n        :id=\"`row-actions-${row.id}`\"\n        button-label=\"Actions\"\n        :options=\"rowActions\"\n        @optionClick=\"action => handleRowAction(action, row)\"\n      />\n    </td>\n  </tr>\n</template>",
      "when": "Adding actions to table rows or list items",
      "pros": ["Space-efficient", "Consistent UI", "Easy to extend actions"],
      "cons": ["Requires click to see options", "Not discoverable without hover"]
    },
    {
      "name": "Column Filter Menu",
      "description": "Multi-select filter for table columns",
      "code": "<script setup>\nimport { ref, computed } from 'vue';\nimport { InDropdownMenu } from '@useinsider/design-system-vue';\n\nconst allColumns = [\n  { text: 'Name', value: 'name' },\n  { text: 'Email', value: 'email' },\n  { text: 'Status', value: 'status' },\n  { text: 'Created', value: 'created' }\n];\n\nconst visibleColumns = ref(['name', 'email', 'status']);\n\nconst toggleColumn = (column) => {\n  const index = visibleColumns.value.indexOf(column.value);\n  if (index === -1) {\n    visibleColumns.value.push(column.value);\n  } else {\n    visibleColumns.value.splice(index, 1);\n  }\n};\n\nconst selectAll = (columns) => {\n  visibleColumns.value = columns.map(c => c.value);\n};\n\nconst clearAll = () => {\n  visibleColumns.value = [];\n};\n</script>\n\n<template>\n  <InDropdownMenu\n    id=\"column-filter\"\n    button-label=\"Columns\"\n    selection-type=\"multiple\"\n    :options=\"allColumns\"\n    :pre-selected-values=\"visibleColumns\"\n    select-all-option-status\n    @optionClick=\"toggleColumn\"\n    @selectAllOptions=\"selectAll\"\n    @resetAllOptions=\"clearAll\"\n  />\n</template>",
      "when": "Implementing customizable table column visibility",
      "pros": ["User-controlled columns", "Persistent selection", "Batch select/deselect"],
      "cons": ["State management needed", "Can hide important columns"]
    },
    {
      "name": "Bulk Actions Menu",
      "description": "Actions for multiple selected items",
      "code": "<script setup>\nimport { ref, computed } from 'vue';\nimport { InDropdownMenu } from '@useinsider/design-system-vue';\n\nconst selectedItems = ref<number[]>([]);\n\nconst bulkActions = computed(() => {\n  const count = selectedItems.value.length;\n  return [\n    { \n      text: `Delete ${count} items`, \n      value: 'delete', \n      icon: 'trash',\n      disabled: count === 0\n    },\n    { \n      text: `Export ${count} items`, \n      value: 'export', \n      icon: 'download',\n      disabled: count === 0\n    },\n    { \n      text: 'Mark as read', \n      value: 'mark-read', \n      icon: 'check',\n      disabled: count === 0\n    }\n  ];\n});\n\nconst handleBulkAction = async (action) => {\n  const ids = selectedItems.value;\n  \n  switch(action.value) {\n    case 'delete':\n      await bulkDelete(ids);\n      selectedItems.value = [];\n      break;\n    case 'export':\n      await bulkExport(ids);\n      break;\n    case 'mark-read':\n      await bulkMarkRead(ids);\n      break;\n  }\n};\n</script>\n\n<template>\n  <InDropdownMenu\n    id=\"bulk-actions\"\n    :button-label=\"`Bulk Actions (${selectedItems.length})`\"\n    :options=\"bulkActions\"\n    :disabled=\"selectedItems.length === 0\"\n    @optionClick=\"handleBulkAction\"\n  />\n</template>",
      "when": "Providing actions for multiple selected items",
      "pros": ["Efficient for batch operations", "Dynamic based on selection", "Clear action count"],
      "cons": ["Requires selection tracking", "Can be complex with mixed item types"]
    }
  ],
  "useCases": [
    {
      "title": "Context Menus",
      "description": "Right-click or three-dot menu for items",
      "example": "<InDropdownMenu\n  id=\"context-menu\"\n  button-icon=\"three-dots\"\n  :options=\"[\n    { text: 'Edit', value: 'edit' },\n    { text: 'Duplicate', value: 'duplicate' },\n    { text: 'Delete', value: 'delete' }\n  ]\"\n  @optionClick=\"handleContextAction\"\n/>"
    },
    {
      "title": "Filter Selection",
      "description": "Multi-select filters for data tables",
      "example": "<InDropdownMenu\n  button-label=\"Status Filter\"\n  selection-type=\"multiple\"\n  :options=\"statusOptions\"\n  :pre-selected-values=\"activeFilters\"\n  @optionClick=\"toggleFilter\"\n/>"
    },
    {
      "title": "Export Options",
      "description": "Different export formats",
      "example": "<InDropdownMenu\n  button-label=\"Export\"\n  :options=\"[\n    { text: 'CSV', value: 'csv', icon: 'file' },\n    { text: 'Excel', value: 'xlsx', icon: 'file-excel' },\n    { text: 'PDF', value: 'pdf', icon: 'file-pdf' }\n  ]\"\n  @optionClick=\"handleExport\"\n/>"
    },
    {
      "title": "Settings Menu",
      "description": "User or app settings",
      "example": "<InDropdownMenu\n  button-icon=\"settings\"\n  :options=\"[\n    { text: 'Profile', value: 'profile', icon: 'user' },\n    { text: 'Preferences', value: 'preferences', icon: 'sliders' },\n    { text: 'Logout', value: 'logout', icon: 'sign-out' }\n  ]\"\n  @optionClick=\"handleSettings\"\n/>"
    }
  ],
  "bestPractices": [
    {
      "title": "Use Descriptive Button Labels",
      "description": "Button label should clearly indicate menu purpose",
      "code": "// Good\n<InDropdownMenu button-label=\"Actions\" />\n<InDropdownMenu button-label=\"Export Options\" />\n\n// Avoid\n<InDropdownMenu button-label=\"...\" />\n<InDropdownMenu button-label=\"Menu\" />",
      "reasoning": "Users should know what to expect before opening the menu"
    },
    {
      "title": "Group Related Actions",
      "description": "Organize menu items logically",
      "code": "const options = [\n  // Primary actions\n  { text: 'Edit', value: 'edit', icon: 'pencil' },\n  { text: 'Duplicate', value: 'duplicate', icon: 'copy' },\n  // Destructive action last\n  { text: 'Delete', value: 'delete', icon: 'trash' }\n];",
      "reasoning": "Logical grouping improves usability and reduces errors"
    },
    {
      "title": "Handle All Option Values",
      "description": "Always handle every possible option value",
      "code": "const handleAction = (option) => {\n  switch(option.value) {\n    case 'edit':\n      editItem();\n      break;\n    case 'delete':\n      deleteItem();\n      break;\n    default:\n      console.warn('Unhandled action:', option.value);\n  }\n};",
      "reasoning": "Prevents silent failures when options are clicked"
    },
    {
      "title": "Disable Unavailable Actions",
      "description": "Use disabled property instead of hiding options",
      "code": "const options = computed(() => [\n  { \n    text: 'Edit', \n    value: 'edit',\n    disabled: !canEdit.value \n  },\n  { \n    text: 'Delete', \n    value: 'delete',\n    disabled: !canDelete.value\n  }\n]);",
      "reasoning": "Shows what's available but not currently accessible, better UX"
    }
  ],
  "commonMistakes": [
    {
      "mistake": "Using InDropdownMenu for data selection instead of InSelect/InMultiSelect",
      "impact": "Wrong component for the use case",
      "fix": "Use InSelect for form inputs, InDropdownMenu for action menus",
      "severity": "medium"
    },
    {
      "mistake": "Not closing menu after action in selectionType='single'",
      "impact": "Menu stays open unnecessarily",
      "fix": "Menu auto-closes on click in single mode, no action needed",
      "severity": "low"
    }
  ],
  "performanceNotes": [
    {
      "topic": "Large option lists",
      "description": "Menus with 50+ items can cause rendering lag",
      "recommendation": "Use lazyLoad or virtual scrolling for large lists, or break into sub-menus",
      "impact": "high"
    },
    {
      "topic": "Search filtering",
      "description": "Client-side filtering is fast up to ~200 items",
      "recommendation": "For larger datasets, use externalSearch with debounced API calls",
      "impact": "medium"
    }
  ],
  "accessibilityNotes": [
    {
      "topic": "Keyboard navigation",
      "description": "Dropdown menus must be fully keyboard accessible",
      "wcagLevel": "A",
      "recommendation": "Arrow keys navigate, Enter selects, Escape closes. Tab moves focus out.",
      "example": "<InDropdownMenu\n  id=\"accessible-menu\"\n  button-label=\"Actions\"\n  :options=\"options\"\n/>\n// Automatically supports: Tab, Arrow Up/Down, Enter, Escape"
    },
    {
      "topic": "Screen reader support",
      "description": "Icon-only buttons need accessible labels",
      "wcagLevel": "A",
      "recommendation": "Always provide button-label even if using button-icon",
      "example": "<InDropdownMenu\n  button-icon=\"three-dots\"\n  button-label=\"Actions\"\n  :options=\"options\"\n/>"
    },
    {
      "topic": "Focus management",
      "description": "Focus should return to trigger button after menu closes",
      "wcagLevel": "AA",
      "recommendation": "Component handles this automatically, no additional code needed",
      "example": "// Focus returns to button after Escape or selection"
    }
  ]
}
