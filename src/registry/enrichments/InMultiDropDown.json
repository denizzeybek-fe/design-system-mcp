{
  "_metadata": {
    "lastUpdated": "2025-11-25T14:48:39.823Z",
    "propsHash": "7a84befceda1",
    "eventsHash": "41c59fa49883",
    "propCount": 35,
    "eventCount": 5
  },
  "component": "InMultiDropDown",
  "propEnrichments": {
    "options": {
      "description": "Array of selectable options",
      "valueFormat": {
        "structure": "Array of option objects",
        "notes": "Defines the multi-select items. Each option must have 'label' (display text) and 'value' (selected value). Optional: 'disabled' to prevent selection. For type='checkbox', checkboxes appear next to each option. For type='tags', options show as removable tags when selected.",
        "typescript": "Array<{ label: string; value: string | number; disabled?: boolean; }>",
        "example": ":options=\"[{ label: 'Option 1', value: '1' }, { label: 'Option 2', value: '2', disabled: true }]\""
      },
      "commonMistakes": [
        {
          "mistake": "Using 'text' instead of 'label' for option display",
          "impact": "Options won't display - component expects 'label' property",
          "fix": "Use 'label' property: { label: 'Text', value: 'val' }",
          "severity": "high"
        }
      ]
    },
    "value": {
      "description": "Selected values array (v-model)",
      "valueFormat": {
        "structure": "Array of selected values",
        "notes": "Array of currently selected values that match the 'value' properties of selected options. Use v-model for two-way binding. Empty array means no selection. Component automatically adds/removes values when user selects/deselects options.",
        "typescript": "Array<string | number>",
        "example": "v-model=\"selectedValues\""
      }
    },
    "customOptionsKey": {
      "description": "Custom property name for option label",
      "valueFormat": {
        "structure": "Array<string>",
        "notes": "Maps custom property names from your data to dropdown's expected format. Use when your API returns objects with different property names than 'label' and 'value'. Example: if API returns [{name: 'John', id: 1}], use ['name', 'id'] to map name→label and id→value. Same as InDropDown.",
        "typescript": "Array<string>",
        "example": ":custom-options-key=\"['name', 'id']\""
      },
      "commonMistakes": [
        {
          "mistake": "Not setting when options have different label key",
          "impact": "Options don't display correctly - shows undefined or [Object object]",
          "fix": "Map your property names: :custom-options-key=\"['yourLabelKey', 'yourValueKey']\"",
          "severity": "medium"
        }
      ]
    },
    "fetchUrl": {
      "description": "API endpoint for fetching options dynamically",
      "valueFormat": {
        "structure": "string (URL)",
        "notes": "API endpoint URL to fetch dropdown options dynamically. When set, component will fetch options from this endpoint on mount or when search query changes. Use with 'responseKey' to extract data from nested responses and 'queryString' for search parameter name.",
        "typescript": "string",
        "example": "fetch-url=\"/api/users\""
      }
    },
    "responseKey": {
      "description": "JSON path to options array in API response",
      "valueFormat": {
        "structure": "string (dot notation)",
        "notes": "Dot-notation path to extract options array from API response. CRITICAL for API fetching. If API returns {data: {items: [...]}}, use 'data.items'. If response is flat array at root, leave empty or use 'data' if responseHasData=true.",
        "typescript": "string",
        "example": "response-key=\"data.items\""
      }
    },
    "queryString": {
      "description": "Query parameter name for search",
      "valueFormat": {
        "structure": "string",
        "notes": "Name of the query parameter for search functionality when using API fetch. The search input value will be sent as this parameter. Example: if queryString='search', API will be called with ?search=userInput. Requires searchStatus=true and fetchUrl to be set.",
        "typescript": "string",
        "example": "query-string=\"search\""
      }
    },
    "maxSelectableItem": {
      "description": "Maximum number of items that can be selected",
      "valueFormat": {
        "structure": "number",
        "notes": "Limits the number of options that can be selected. When limit is reached, remaining options become disabled and warningMessage is displayed. Use 0 (default) for unlimited selection. Useful for enforcing business rules like 'select up to 5 categories'.",
        "typescript": "number",
        "example": ":max-selectable-item=\"5\""
      }
    },
    "addNewTagStatus": {
      "description": "Allow creating new options by typing",
      "valueFormat": {
        "structure": "boolean",
        "notes": "Enables adding new options on-the-fly when user types value not in the options list. Shows 'Create new' button in dropdown. When clicked, emits 'addNewOption' event with the typed value. Subject to character limits (minimumNewTagCharacterLimit, maxNewTagCharacterLimit).",
        "typescript": "boolean",
        "example": ":add-new-tag-status=\"true\""
      }
    },
    "minimumNewTagCharacterLimit": {
      "description": "Minimum characters required for new tag",
      "valueFormat": {
        "structure": "number",
        "notes": "Minimum length required for creating new tags. Default is 2. 'Create new' option only appears when typed text length >= this value. Prevents accidentally creating single-character or empty tags.",
        "typescript": "number",
        "example": ":minimum-new-tag-character-limit=\"2\""
      }
    },
    "maxNewTagCharacterLimit": {
      "description": "Maximum characters allowed for new tag",
      "valueFormat": {
        "structure": "number | string",
        "notes": "Maximum length allowed for creating new tags. Empty string ('') means no limit. When limit is reached, user cannot type more characters. Use to enforce tag naming standards or database constraints.",
        "typescript": "number | string",
        "example": ":max-new-tag-character-limit=\"50\""
      }
    },
    "hasTemporaryOptions": {
      "description": "Allow temporary options that aren't persisted",
      "valueFormat": {
        "structure": "boolean",
        "notes": "When true, newly created options are marked as temporary and may not be persisted to backend. Useful for client-side filtering or preview functionality where new options shouldn't be saved to database immediately.",
        "typescript": "boolean",
        "example": ":has-temporary-options=\"true\""
      }
    },
    "type": {
      "description": "Visual type/variant of the dropdown",
      "valueFormat": {
        "structure": "string enum",
        "notes": "Controls visual representation of selections. 'checkbox' (default) shows checkboxes next to options, useful for traditional multi-select. 'tags' displays selected items as removable tag chips above dropdown, better for space-constrained UIs.",
        "typescript": "'checkbox' | 'tags'",
        "possibleValues": [
          "checkbox",
          "tags"
        ],
        "example": "type=\"tags\""
      }
    },
    "theme": {
      "description": "Color theme of the dropdown",
      "valueFormat": {
        "structure": "string enum",
        "notes": "Visual color theme. 'grey' (default) for standard gray styling, 'light' for lighter background, 'dark' for dark mode. Affects dropdown background, borders, and text colors.",
        "typescript": "'grey' | 'light' | 'dark'",
        "possibleValues": [
          "grey",
          "light",
          "dark"
        ],
        "example": "theme=\"dark\""
      }
    }
  },
  "eventEnrichments": {
    "change": {
      "description": "Emitted when selection changes",
      "payload": "Array<string | number> - selected values",
      "usage": "@change=\"handleChange\""
    },
    "search": {
      "description": "Emitted when search input changes",
      "payload": "string - search query",
      "usage": "@search=\"handleSearch\""
    },
    "addNewOption": {
      "description": "Emitted when new option is created",
      "payload": "string - new option value",
      "usage": "@add-new-option=\"handleNewOption\""
    },
    "closeList": {
      "description": "Emitted when dropdown closes",
      "payload": "void",
      "usage": "@close-list=\"handleClose\""
    },
    "click": {
      "description": "Emitted when dropdown is clicked",
      "payload": "Event",
      "usage": "@click=\"handleClick\""
    }
  },
  "examples": [
    {
      "title": "Basic Multi-Select",
      "description": "Simple multi-select with static options",
      "code": "<InMultiDropDown\n  id=\"categories\"\n  label=\"Categories\"\n  placeholder=\"Select categories\"\n  :options=\"[\n    { label: 'Technology', value: 'tech' },\n    { label: 'Business', value: 'business' },\n    { label: 'Design', value: 'design' }\n  ]\"\n  v-model=\"selectedCategories\"\n  @change=\"handleChange\"\n/>"
    },
    {
      "title": "With API Fetch",
      "description": "Dynamic options from API",
      "code": "<InMultiDropDown\n  id=\"users\"\n  label=\"Assign Users\"\n  fetch-url=\"/api/users\"\n  response-key=\"data.users\"\n  query-string=\"search\"\n  search-status\n  search-placeholder=\"Search users...\"\n  v-model=\"assignedUsers\"\n  @search=\"handleSearch\"\n/>"
    },
    {
      "title": "With New Tag Creation",
      "description": "Allow adding custom options",
      "code": "<InMultiDropDown\n  id=\"tags\"\n  label=\"Tags\"\n  type=\"tags\"\n  :options=\"availableTags\"\n  v-model=\"selectedTags\"\n  add-new-tag-status\n  :minimum-new-tag-character-limit=\"2\"\n  :max-new-tag-character-limit=\"30\"\n  new-option-text=\"Create tag\"\n  @add-new-option=\"createTag\"\n/>"
    }
  ],
  "commonMistakes": [
    {
      "mistake": "Not setting responseKey for API fetch",
      "issue": "Options don't populate from API",
      "solution": "Set response-key to match your API response structure",
      "severity": "high"
    },
    {
      "mistake": "Using disable instead of disabled in options",
      "issue": "Individual options can't be disabled",
      "solution": "Use { label: 'X', value: 'x', disabled: true }",
      "severity": "medium"
    },
    {
      "mistake": "Forgetting v-model for two-way binding",
      "issue": "Selected values not synced",
      "solution": "Use v-model instead of just :value",
      "severity": "high"
    }
  ],
  "bestPractices": [
    {
      "practice": "Use searchStatus for large option lists",
      "description": "Enable search when options > 10 for better UX",
      "example": "search-status search-placeholder=\"Search...\""
    },
    {
      "practice": "Set maxSelectableItem for limited selections",
      "description": "Prevent over-selection with clear limits",
      "example": ":max-selectable-item=\"3\""
    },
    {
      "practice": "Provide meaningful validation messages",
      "description": "Use warningMessage and invalidMessage for user feedback",
      "example": "invalid invalid-message=\"Please select at least one option\""
    }
  ],
  "codeSnippets": {
    "basicMultiDropDown": {
      "title": "Basic Multi-Select Dropdown",
      "description": "Simple multi-select with checkbox type",
      "code": "<script setup>\nimport { ref } from 'vue';\nimport { InMultiDropDown } from '@useinsider/design-system-vue';\n\nconst selectedCategories = ref([]);\n\nconst categoryOptions = [\n  { label: 'Electronics', value: 'electronics' },\n  { label: 'Clothing', value: 'clothing' },\n  { label: 'Books', value: 'books' },\n  { label: 'Home & Garden', value: 'home' },\n  { label: 'Sports', value: 'sports' }\n];\n</script>\n\n<template>\n  <InMultiDropDown\n    v-model=\"selectedCategories\"\n    :options=\"categoryOptions\"\n    label=\"Select Categories\"\n    type=\"checkbox\"\n    placeholder=\"Choose categories\"\n  />\n</template>"
    },
    "tagTypeMultiSelect": {
      "title": "Multi-Select with Tag Display",
      "description": "Display selected items as removable tags",
      "code": "<script setup>\nimport { ref } from 'vue';\nimport { InMultiDropDown } from '@useinsider/design-system-vue';\n\nconst selectedSkills = ref([]);\n\nconst skillOptions = [\n  { label: 'JavaScript', value: 'js' },\n  { label: 'TypeScript', value: 'ts' },\n  { label: 'Vue.js', value: 'vue' },\n  { label: 'React', value: 'react' },\n  { label: 'Node.js', value: 'node' }\n];\n</script>\n\n<template>\n  <InMultiDropDown\n    v-model=\"selectedSkills\"\n    :options=\"skillOptions\"\n    label=\"Skills\"\n    type=\"tags\"\n    search-status\n    search-placeholder=\"Search skills...\"\n    :max-selectable-item=\"3\"\n  />\n</template>"
    },
    "apiMultiDropDown": {
      "title": "Multi-Select with API Data",
      "description": "Fetch options from API with search and validation",
      "code": "<script setup>\nimport { ref, computed } from 'vue';\nimport { InMultiDropDown } from '@useinsider/design-system-vue';\n\nconst selectedUsers = ref([]);\nconst formSubmitted = ref(false);\n\nconst validationState = computed(() => {\n  if (!formSubmitted.value) return {};\n  \n  if (selectedUsers.value.length === 0) {\n    return {\n      invalid: true,\n      invalidMessage: 'Please select at least one user'\n    };\n  }\n  \n  if (selectedUsers.value.length > 5) {\n    return {\n      warning: true,\n      warningMessage: 'Selecting more than 5 users may impact performance'\n    };\n  }\n  \n  return {};\n});\n</script>\n\n<template>\n  <InMultiDropDown\n    v-model=\"selectedUsers\"\n    label=\"Assign Users\"\n    fetch-url=\"/api/users\"\n    response-key=\"data.users\"\n    :custom-options-key=\"['name', 'id']\"\n    search-status\n    query-string=\"search\"\n    type=\"checkbox\"\n    :max-selectable-item=\"10\"\n    v-bind=\"validationState\"\n  />\n</template>"
    }
  },
  "styling": {
    "cssVariables": {
      "--multi-dropdown-bg": "Dropdown button background (default: white)",
      "--multi-dropdown-border": "Border color (default: #d0d5dd)",
      "--multi-dropdown-text": "Text color (default: #101828)",
      "--multi-dropdown-placeholder": "Placeholder color (default: #667085)",
      "--multi-dropdown-hover-bg": "Hover state background (default: #f9fafb)",
      "--multi-dropdown-focus-border": "Focus border color (default: primary color)",
      "--multi-dropdown-tag-bg": "Tag background when type='tags' (default: #f2f4f7)",
      "--multi-dropdown-tag-text": "Tag text color (default: #344054)",
      "--multi-dropdown-checkbox-checked": "Checked checkbox color (default: primary color)"
    },
    "classes": {
      "in-multi-dropdown": "Root dropdown container",
      "in-multi-dropdown__button": "Dropdown trigger button",
      "in-multi-dropdown__label": "Label text above dropdown",
      "in-multi-dropdown__list": "Dropdown menu list",
      "in-multi-dropdown__option": "Individual option item",
      "in-multi-dropdown__checkbox": "Checkbox when type='checkbox'",
      "in-multi-dropdown__tag": "Selected tag when type='tags'",
      "in-multi-dropdown__tag-remove": "Remove button on tag",
      "in-multi-dropdown--invalid": "Applied when invalid=true",
      "in-multi-dropdown--warning": "Applied when warning=true"
    },
    "notes": "Tag styling is automatically applied when type='tags'. Checkbox styling uses design system checkbox component."
  },
  "implementationPatterns": [
    {
      "name": "Limited Multi-Select",
      "description": "Multi-select with maximum selection limit",
      "code": "<script setup>\nimport { ref, computed } from 'vue';\nimport { InMultiDropDown } from '@useinsider/design-system-vue';\n\nconst selectedTags = ref([]);\nconst maxTags = 3;\n\nconst tagOptions = [\n  { label: 'Feature', value: 'feature' },\n  { label: 'Bug', value: 'bug' },\n  { label: 'Enhancement', value: 'enhancement' },\n  { label: 'Documentation', value: 'docs' },\n  { label: 'Testing', value: 'test' }\n];\n\nconst selectionWarning = computed(() => {\n  if (selectedTags.value.length >= maxTags) {\n    return `Maximum ${maxTags} tags allowed`;\n  }\n  return '';\n});\n</script>\n\n<template>\n  <InMultiDropDown\n    v-model=\"selectedTags\"\n    :options=\"tagOptions\"\n    label=\"Issue Tags\"\n    type=\"tags\"\n    :max-selectable-item=\"maxTags\"\n    :warning=\"selectedTags.length >= maxTags\"\n    :warning-message=\"selectionWarning\"\n  />\n</template>",
      "when": "Use when you need to enforce a maximum number of selections",
      "pros": ["Prevents over-selection", "Clear user feedback", "Enforces business rules"],
      "cons": ["May feel restrictive", "Requires clear communication to user"]
    },
    {
      "name": "Grouped Multi-Select with Select All",
      "description": "Multi-select with group selection functionality",
      "code": "<script setup>\nimport { ref } from 'vue';\nimport { InMultiDropDown } from '@useinsider/design-system-vue';\n\nconst selectedPermissions = ref([]);\n\nconst permissionGroups = [\n  { label: 'Users', value: 'users_read' },\n  { label: 'Users', value: 'users_write' },\n  { label: 'Users', value: 'users_delete' },\n  { label: 'Posts', value: 'posts_read' },\n  { label: 'Posts', value: 'posts_write' },\n  { label: 'Posts', value: 'posts_delete' }\n];\n\nconst selectAllInGroup = (group: string) => {\n  const groupValues = permissionGroups\n    .filter(p => p.label === group)\n    .map(p => p.value);\n  \n  selectedPermissions.value = [\n    ...new Set([...selectedPermissions.value, ...groupValues])\n  ];\n};\n\nconst deselectAllInGroup = (group: string) => {\n  const groupValues = permissionGroups\n    .filter(p => p.label === group)\n    .map(p => p.value);\n  \n  selectedPermissions.value = selectedPermissions.value.filter(\n    v => !groupValues.includes(v)\n  );\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"group-actions\">\n      <button @click=\"selectAllInGroup('Users')\">Select All Users</button>\n      <button @click=\"deselectAllInGroup('Users')\">Deselect All Users</button>\n    </div>\n    \n    <InMultiDropDown\n      v-model=\"selectedPermissions\"\n      :options=\"permissionGroups\"\n      label=\"Permissions\"\n      type=\"checkbox\"\n    />\n  </div>\n</template>",
      "when": "Use when options can be logically grouped and bulk selection is needed",
      "pros": ["Faster selection", "Better UX for grouped data", "Reduces clicks"],
      "cons": ["More complex implementation", "Requires group management logic"]
    },
    {
      "name": "Dynamic Filter Multi-Select",
      "description": "Multi-select for filtering with immediate results",
      "code": "<script setup>\nimport { ref, computed } from 'vue';\nimport { InMultiDropDown } from '@useinsider/design-system-vue';\n\nconst selectedFilters = ref([]);\nconst allProducts = ref([...]);\n\nconst filterOptions = [\n  { label: 'In Stock', value: 'in_stock' },\n  { label: 'On Sale', value: 'on_sale' },\n  { label: 'Free Shipping', value: 'free_shipping' },\n  { label: 'Top Rated', value: 'top_rated' }\n];\n\nconst filteredProducts = computed(() => {\n  if (selectedFilters.value.length === 0) return allProducts.value;\n  \n  return allProducts.value.filter(product => {\n    return selectedFilters.value.every(filter => {\n      switch (filter) {\n        case 'in_stock': return product.stock > 0;\n        case 'on_sale': return product.onSale;\n        case 'free_shipping': return product.freeShipping;\n        case 'top_rated': return product.rating >= 4.5;\n        default: return true;\n      }\n    });\n  });\n});\n</script>\n\n<template>\n  <div>\n    <InMultiDropDown\n      v-model=\"selectedFilters\"\n      :options=\"filterOptions\"\n      label=\"Filter Products\"\n      type=\"tags\"\n      placeholder=\"Apply filters\"\n    />\n    \n    <div class=\"results\">\n      {{ filteredProducts.length }} products found\n    </div>\n  </div>\n</template>",
      "when": "Use for filtering data with multiple criteria that can be combined",
      "pros": ["Real-time filtering", "Multiple filter combination", "Clear active filters"],
      "cons": ["Can be performance-intensive", "Complex filter logic"]
    }
  ],
  "useCases": [
    {
      "title": "Tag/Category Selection",
      "description": "Select multiple tags or categories for content",
      "example": "Blog post editor with multi-select for tags (JavaScript, Vue, Tutorial) displayed as removable chips, max 5 tags"
    },
    {
      "title": "User/Role Assignment",
      "description": "Assign multiple users or roles in admin panels",
      "example": "Project settings with multi-select for team members, fetched from API with search, checkbox type, max 10 users"
    },
    {
      "title": "Filter Controls",
      "description": "Multi-criteria filtering for data tables or lists",
      "example": "E-commerce product filters (In Stock, On Sale, Free Shipping) as multi-select with tag display showing active filters"
    },
    {
      "title": "Permission Management",
      "description": "Select multiple permissions or access rights",
      "example": "Role editor with multi-select for permissions (Read, Write, Delete) grouped by resource type, checkbox type"
    }
  ],
  "performanceNotes": [
    {
      "topic": "Large option lists with checkboxes",
      "description": "Rendering 100+ checkboxes can slow dropdown opening",
      "recommendation": "Use fetchUrl with search for large datasets. Limit initial options to 50. Enable search when options > 20 for better UX",
      "impact": "high"
    },
    {
      "topic": "Tag rendering performance",
      "description": "Many selected tags (20+) can slow UI updates",
      "recommendation": "Set reasonable maxSelectableItem limit (5-10). Consider using chip list component for displaying many tags outside dropdown",
      "impact": "medium"
    },
    {
      "topic": "Real-time filtering with selected values",
      "description": "Computing filtered results on every selection change",
      "recommendation": "Debounce filter computations if expensive. Use computed properties with proper dependency tracking. Consider memoization for complex filters",
      "impact": "medium"
    }
  ],
  "accessibilityNotes": [
    {
      "topic": "Label requirement",
      "description": "Multi-selects must have associated labels",
      "wcagLevel": "A",
      "recommendation": "Always provide label prop. Component automatically links label to button with aria-labelledby",
      "example": "label=\"Select Categories\" // Required for accessibility"
    },
    {
      "topic": "Checkbox accessibility",
      "description": "Checkboxes must be keyboard accessible and properly labeled",
      "wcagLevel": "A",
      "recommendation": "Component handles checkbox keyboard interaction (Space to toggle). Each checkbox is linked to its label. Use type='checkbox' for better screen reader support",
      "example": "type=\"checkbox\" // Better for screen readers than tags"
    },
    {
      "topic": "Selected count announcement",
      "description": "Screen readers should announce number of selected items",
      "wcagLevel": "AA",
      "recommendation": "Component automatically updates aria-label with selected count (e.g., '3 items selected'). Keep maxSelectableItem reasonable for easier tracking",
      "example": "// Component announces: '3 of 10 items selected'"
    },
    {
      "topic": "Tag removal accessibility",
      "description": "Tag remove buttons need proper labels",
      "wcagLevel": "A",
      "recommendation": "When type='tags', each tag's remove button has aria-label='Remove [option label]'. Keyboard accessible with Delete/Backspace keys",
      "example": "type=\"tags\" // Auto-labels remove buttons"
    }
  ],
  "helperFunctions": [
    {
      "name": "selectAll",
      "description": "Select all available options programmatically",
      "code": "function selectAll(options: Array<{value: any}>): any[] {\n  return options.filter(opt => !opt.disabled).map(opt => opt.value);\n}",
      "parameters": [
        {
          "name": "options",
          "type": "Array<{value: any; disabled?: boolean}>",
          "description": "Array of dropdown options"
        }
      ],
      "returnType": "any[]",
      "example": "const allSelected = selectAll(categoryOptions);\nselectedCategories.value = allSelected;"
    },
    {
      "name": "deselectAll",
      "description": "Clear all selections",
      "code": "function deselectAll(): any[] {\n  return [];\n}",
      "parameters": [],
      "returnType": "any[]",
      "example": "selectedCategories.value = deselectAll();"
    },
    {
      "name": "toggleSelection",
      "description": "Toggle a specific option in/out of selection",
      "code": "function toggleSelection(currentSelection: any[], value: any): any[] {\n  const index = currentSelection.indexOf(value);\n  if (index > -1) {\n    return currentSelection.filter(v => v !== value);\n  }\n  return [...currentSelection, value];\n}",
      "parameters": [
        {
          "name": "currentSelection",
          "type": "any[]",
          "description": "Current selected values array"
        },
        {
          "name": "value",
          "type": "any",
          "description": "Value to toggle"
        }
      ],
      "returnType": "any[]",
      "example": "selectedValues.value = toggleSelection(selectedValues.value, 'option1');\n// Adds if not present, removes if present"
    },
    {
      "name": "getSelectedLabels",
      "description": "Get labels of currently selected options",
      "code": "function getSelectedLabels(options: Array<{label: string; value: any}>, selectedValues: any[]): string[] {\n  return options\n    .filter(opt => selectedValues.includes(opt.value))\n    .map(opt => opt.label);\n}",
      "parameters": [
        {
          "name": "options",
          "type": "Array<{label: string; value: any}>",
          "description": "All available options"
        },
        {
          "name": "selectedValues",
          "type": "any[]",
          "description": "Currently selected values"
        }
      ],
      "returnType": "string[]",
      "example": "const labels = getSelectedLabels(options, selectedCategories.value);\n// Returns: ['Electronics', 'Books']"
    }
  ]
}
